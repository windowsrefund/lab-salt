# vim: ft=yaml

fileserver_backend:
  - gitfs

# 2 branches, master and testing, will be available from each repo
# master will serve the prod environment
# testing will serve the test environment
gitfs_saltenv:
  - prod:
    - master:
      - mountpoint: salt://gitfs-prod
      - ref: master
  - test:
    - testing:
      - mountpoint: salt://gitfs-test
      - ref: testing

# repos are searched in the order they are listed
gitfs_remotes:
  - git@bitbucket.org:akosmin/lab-salt.git:
    # relative path to a subdirectory from which Salt should serve files
    - root: states
    - pubkey: /root/.ssh/id_rsa_lab_salt.pub
    - privkey: /root/.ssh/id_rsa_lab_salt
  - https://github.com/windowsrefund/users-formula.git
  - https://github.com/windowsrefund/salt-formula.git


# ext_pillar:
  # - git:
    # - __env__ git@bitbucket.org:akosmin/lab-salt.git:
      # - root: pillar
      # - privkey: /root/.ssh/id_rsa_lab_salt
      # - pubkey: /root/.ssh/id_rsa_lab_salt.pub

#ssh_update_roster: True
#reactor:
#  - 'salt/minion/*/start':
#    - /srv/salt/master/reactor/auth-complete.sls	
